(function(e,t,n,r){"use strict";var i="qoopido",s="base",o=function(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments)};typeof define=="function"&&define.amd?define(o):o()})(function(e,t,n){"use strict";var r=!!(Object.getOwnPropertyNames&&Array.prototype.forEach&&Object.getOwnPropertyDescriptor);return Object.create===n&&(Object.create=function(e,t){var r;if(e===null)r={__proto__:null};else{if(typeof e!="object")throw new TypeError("typeof prototype["+typeof e+'] != "object"');var i=function(){};i.prototype=e,r=new i,r.__proto__=e}return t!==n&&Object.defineProperties(r,t),r}),Object.getOwnPropertyDescriptors===n&&(Object.getOwnPropertyDescriptors=function(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t}),{create:function(){var t=Object.create(this);return t._constructor&&t._constructor.apply(t,arguments),t.create=t.extend=n,t},extend:function(t){t=t||{},t._parent=this;if(r===!0)return Object.create(this,Object.getOwnPropertyDescriptors(t));var n=Object.create(this),i;for(i in t)i!=="__proto__"&&(n[i]=t[i]);return Object.create(n)}}},window,document),function(e,t,n,r){"use strict";var i="qoopido",s="emitter",o=function(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments)};typeof define=="function"&&define.amd?define(["./base"],o):o(t[i].base)}(function(e,t,n,r){"use strict";var i=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.extend({_mapped:null,_listener:null,_constructor:function(){var t=this,n;t._listener={},t._mapped={};for(n in t)typeof t[n]=="function"&&i.test(n)===!1&&(t[n]=t._map(n))},_map:function(t){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1);return n._mapped[t]=n[t],function(){var e=Array.prototype.slice.call(arguments),i;return n.emit.apply(n,["pre"+r,e]),i=n._mapped[t].apply(n,e),n.emit.apply(n,["post"+r,i,e]),i}},on:function(t,n){var i=this;return t!==r&&n!==r&&(i._listener[t]=i._listener[t]||[]).push(n),i},one:function(t,n){var i=this;return t!==r&&n!==r&&(n.once=!0,i.on(t,n)),i},off:function(t,n){var i=this,s;if(t!==r){i._listener[t]=i._listener[t]||[];if(n)while((s=i._listener[t].indexOf(n))!==-1)i._listener[t].splice(s,1);else i._listener[t].length=0}return i},emit:function(t){var n=this,i=Array.prototype.slice.call(arguments).splice(1),s,o;if(t!==r){n._listener[t]=n._listener[t]||[];for(s=0;(o=n._listener[t][s])!==r;s++)o.apply(n,i),o.once===!0&&(n._listener[t].splice(s,1),s--)}return n}})},window,document),function(e,t,n,r){"use strict";var i="qoopido",s="remux",o=function(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments).create()};typeof define=="function"&&define.amd?define(["./emitter"],o):o(t[i].emitter)}(function(e,t,n,r){"use strict";var i,s,o=n.getElementsByTagName("html")[0],u=16,a={fontsize:null,layout:null,ratio:{}},f={fontsize:null,layout:null},l=null;return i=e.extend({_constructor:function(){var r=this,a=parseInt(o.getAttribute("data-base"),10),f=function(){l!==null&&t.clearTimeout(l),l=t.setTimeout(function(){r.updateState()},20)};i._parent._constructor.call(r),isNaN(a)===!1&&(u=a),s=n.createElement("style"),s.type="text/css",n.getElementsByTagName("head")[0].appendChild(s),t.addEventListener("resize",f,!1),t.addEventListener("orientationchange",f,!1),r.updateState()},getState:function(){return a},updateState:function(){var n=this;a.fontsize=parseInt(t.getComputedStyle(o).getPropertyValue("font-size"),10),a.layout=t.getComputedStyle(o,":after").getPropertyValue("content")||null;if(a.fontsize!==f.fontsize||a.layout!==f.layout)f.fontsize=a.fontsize,f.layout=a.layout,a.ratio.device=t.devicePixelRatio||1,a.ratio.fontsize=a.fontsize/u,a.ratio.total=a.ratio.device*a.ratio.fontsize,n.emit("statechange",a);return n},addLayout:function(t,r){var i,o,a,f,l,c,h=this;arguments.length>1?(i={},i[t]=r):i=arguments[0];for(o in i){a=i[o];for(f=a.min;f<=a.max;f++)l=Math.round(a.width*(f/u)),c="@media screen and (min-width: "+l+"px) { html { font-size: "+f+'px; } html:after { content: "'+o+'"; display: none; } }',s.styleSheet?s.styleSheet.cssText+=c:s.appendChild(n.createTextNode(c))}return h.updateState(),h}}),i},window,document);