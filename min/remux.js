(function(e,t,n,r){"use strict";var i="qoopido",s="remux",o=function(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments).create()};typeof define=="function"&&define.amd?define(["./emitter"],o):o(t[i].emitter)})(function(e,t,n,r){"use strict";var i,s,o=n.getElementsByTagName("html")[0],u=16,a={fontsize:null,layout:null,ratio:{}},f={fontsize:null,layout:null},l=null;return i=e.extend({_constructor:function(){var r=this,a=parseInt(o.getAttribute("data-base"),10),f=function(){l!==null&&t.clearTimeout(l),l=t.setTimeout(function(){r.updateState()},20)};i._parent._constructor.call(r),isNaN(a)===!1&&(u=a),s=n.createElement("style"),s.type="text/css",n.getElementsByTagName("head")[0].appendChild(s),t.addEventListener("resize",f,!1),t.addEventListener("orientationchange",f,!1),r.updateState()},getState:function(){return a},updateState:function(){var n=this;a.fontsize=parseInt(t.getComputedStyle(o).getPropertyValue("font-size"),10),a.layout=t.getComputedStyle(o,":after").getPropertyValue("content")||null;if(a.fontsize!==f.fontsize||a.layout!==f.layout)f.fontsize=a.fontsize,f.layout=a.layout,a.ratio.device=t.devicePixelRatio||1,a.ratio.fontsize=a.fontsize/u,a.ratio.total=a.ratio.device*a.ratio.fontsize,n.emit("statechange",a);return n},addLayout:function(t,r){var i,o,a,f,l,c,h=this;arguments.length>1?(i={},i[t]=r):i=arguments[0];for(o in i){a=i[o];for(f=a.min;f<=a.max;f++)l=Math.round(a.width*(f/u)),c="@media screen and (min-width: "+l+"px) { html { font-size: "+f+'px; } html:after { content: "'+o+'"; display: none; } }',s.styleSheet?s.styleSheet.cssText+=c:s.appendChild(n.createTextNode(c))}return h.updateState(),h}}),i},window,document);